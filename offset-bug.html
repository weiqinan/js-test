<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>多物体运动</title>
  <link rel="stylesheet" type="text/css" href="reset.css">
  <style type="text/css">
pre{border: 1px solid #ccc; padding: 10px; margin: 20px;}
li{height: 40px;}
div{width: 100px; height: 100px; background: #eee; margin: 20px;
padding: 10px; border: 1px solid #ccc;}
  .opc{width: 100px; height: 100px; margin:20px; float: left; background: red; fliter:alpha(opacity:30);
    opacity: .3;}
  </style>
</head>
<body>
<pre>//第一次offsetWidth 222 第二次减一后为width221  offsetwidth 为221+20+2 变大了，
  // 所以之前收缩的效果变大了，为了避免这个，所以不适用这个了。用实际的width来计算。
  div1.style.width = parseInt(getStyle(div1,'width') )- 1 + 'px';</pre>
<div id="div1" style="width:100px;"></div>
</body>
<script type="text/javascript">
window.onload=function(){
  //第一次offsetWidth 222 第二次减一后为width221  offsetwidth 为221+20+2 变大了，
  // 所以之前收缩的效果变大了，为了避免这个，所以不适用这个了。用实际的width来计算。
  var div1 = document.getElementById('div1');
  setInterval(function(){
    //div1.style.width = div1.offsetWidth - 1 + 'px';
    //div1.style.width = parseInt(div1.style.width) - 1 + 'px';

    div1.style.width = parseInt(getStyle(div1,'width') )- 1 + 'px';
  },30);


};

function getStyle (obj, name){
  if(obj.currentStyle){
     return obj.currentStyle[name];
  }else{
    return getComputedStyle(obj,false)[name];
  }
}



</script>
</html>
